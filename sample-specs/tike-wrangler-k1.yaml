#
# SINGLE KERNEL WRANGLER BUILD
#
# This spec sample uses the full wrangler --submit system and build pipeline
# to create a single combined kernel based on this spec and docker-stacks
# shaving roughly 1.5G(?) off relative to a base+mission 2 kernel image.
#
# It is fundamentally less stable ATM because our use of docker-stacks is
# still unpinned and wrangler files are installed without consideration of
# the constraints of the base kernel.
#
# Spec choices make this a single kernel:
#   1. We use the name 'python3' which is the standard kernel name given to
#      what we normally refer to as the 'base' environment.
#   2. We select the "wrangler" deployment for consistency with a true
#      wrangler pipeline build vs. injection into a classic deployment.
#   3. Because the base environment exists when the wrangler deployment
#      Dockerfile runs 'nb-wrangler --reinstall' the wrangler's hand coded
#      idempotence prevents the re-addition of the same kernel and packages
#      are instead installed directly into the base environment.
#
image_spec_header:
  image_name: TIKE 2025.07-beta
  deployment_name: wrangler
  kernel_name: python3
  display_name: Python-3.11
  description: |
    This is a beta test of the latest TIKE packages. Use at your own risk!
  valid_on: 2025-07-02
  expires_on: 2025-10-02
  python_version: 3.11.13

repositories:
  tike_content:
    url: https://github.com/spacetelescope/tike_content
    branch: main
  mast_notebooks:
    url: https://github.com/spacetelescope/mast_notebooks
    branch: main

selected_notebooks:
  tike_notebook_selection:
    repo: tike_content
    root_directory: content/notebooks/
    include_subdirs:
      - data-access/
      - lcviz-tutorial/
      - tglc/
      - zooniverse_view_lightcurve/
  mast_tess_kepler_selection:
    repo: mast_notebooks
    root_directory: notebooks/
    include_subdirs:
      - TESS/beginner_how_to_use_lc
      - TESS/beginner_tour_lc_tp
      - Kepler/identifying_transiting_planet_signals
      - Kepler/instrumental_noise_4_electronic_noise

extra_mamba_packages:
  - pip
extra_pip_packages:
  - boto3

system:
  spec_version: 1.0
  archive_format: .tar
  spi_url: https://github.com/jaytmiller/science-platform-images.git